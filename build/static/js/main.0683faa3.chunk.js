(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(16),s=n.n(a),o=(n(21),n(3)),u=n.n(o),i=n(6),l=n(2),d=n(5),j=n.n(d),b=(n(41),n(42),n(43),n(0)),p="http://localhost:8000/";var h=function(e){var t=e.user,n=e.setShowAddProduct,r=e.setProductAdded,a=Object(c.useState)(""),s=Object(l.a)(a,2),o=s[0],d=s[1],h=Object(c.useState)(""),O=Object(l.a)(h,2),f=O[0],m=O[1],x=Object(c.useState)(0),v=Object(l.a)(x,2),N=v[0],y=v[1],g=Object(c.useState)(0),C=Object(l.a)(g,2),k=C[0],S=C[1],w=Object(c.useState)(!1),P=Object(l.a)(w,2),A=P[0],E=P[1];function q(){return(q=Object(i.a)(u.a.mark((function e(){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!o||!f||N<=0||k<=0)&&E(!0),c="".concat(p,"users/api/new-product/"),a={product:{name:o,description:f,price:N,quantity:k}},e.next=5,j()({method:"POST",url:c,headers:{Authorization:"Bearer "+t.token},data:a}).then((function(e){return e.data})).then((function(e){r(!0),n(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"modal-product-view",children:Object(b.jsxs)("div",{className:"modal-product-content",children:[Object(b.jsx)("input",{type:"text",value:o,onChange:function(e){return d(e.target.value)},placeholder:"Nombre del producto"}),Object(b.jsx)("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)},placeholder:"Descripci\xf3n del producto"}),Object(b.jsx)("input",{type:"number",value:N,onChange:function(e){return y(e.target.value)},placeholder:"Precio del producto"}),Object(b.jsx)("input",{type:"number",value:k,onChange:function(e){return S(e.target.value)},placeholder:"Cantidad del producto"}),Object(b.jsx)("button",{type:"button",onClick:function(){return function(){return q.apply(this,arguments)}()},children:"Confirmar"}),Object(b.jsx)("button",{type:"button",className:"red",onClick:function(){return n(!1)},children:"Cerrar"}),A&&Object(b.jsx)("p",{children:"Debes completar todos los campos correctamente"})]})})},O=(n(45),"http://localhost:8000/");var f=function(e){var t=e.user,n=e.product,r=e.setActualProduct,a=e.setProductBuy,s=Object(c.useState)(0),o=Object(l.a)(s,2),d=o[0],p=o[1],h=Object(c.useState)(!1),f=Object(l.a)(h,2),m=f[0],x=f[1];function v(){return(v=Object(i.a)(u.a.mark((function e(){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d<=0&&x(!0),c="".concat(O,"users/api/new-purchase/"),s={product:{id:n.id,quantity:parseInt(d)}},e.next=5,j()({method:"POST",url:c,headers:{Authorization:"Bearer "+t.token},data:s}).then((function(e){return e.data})).then((function(){a(!0),r({})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"modal-view",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)("p",{className:"product",children:n.name}),Object(b.jsx)("input",{type:"number",value:d,onChange:function(e){return p(e.target.value)},placeholder:"Cantidad del producto"}),Object(b.jsx)("button",{type:"button",onClick:function(){return function(){return v.apply(this,arguments)}()},children:"Comprar"}),Object(b.jsx)("button",{type:"button",className:"red",onClick:function(){return r({})},children:"Cerrar"}),m&&Object(b.jsx)("p",{children:"Debes completar todos los campos correctamente"})]})})},m="http://localhost:8000/";var x=function(e){var t=e.user,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(!0),d=Object(l.a)(o,2),p=d[0],O=d[1],x=Object(c.useState)([]),v=Object(l.a)(x,2),N=v[0],y=v[1],g=Object(c.useState)(!1),C=Object(l.a)(g,2),k=C[0],S=C[1],w=Object(c.useState)([]),P=Object(l.a)(w,2),A=P[0],E=P[1],q=Object(c.useState)(!1),B=Object(l.a)(q,2),T=B[0],z=B[1],D=Object(c.useState)(!1),F=Object(l.a)(D,2),I=F[0],L=F[1],R=Object(c.useState)({}),G=Object(l.a)(R,2),V=G[0],J=G[1],U=Object(c.useState)(!1),Z=Object(l.a)(U,2),_=Z[0],M=Z[1],Q=Object(c.useState)(!1),$=Object(l.a)(Q,2),H=$[0],K=$[1];function W(){return X.apply(this,arguments)}function X(){return(X=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(m,"users/api/get-products/"),e.next=3,j()({method:"GET",url:n,headers:{Authorization:"Bearer "+t.token}}).then((function(e){return e.data})).then((function(e){return s(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(m,"users/api/get-user-products/"),e.next=3,j()({method:"GET",url:n,headers:{Authorization:"Bearer "+t.token}}).then((function(e){return e.data})).then((function(e){return y(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(m,"users/api/get-purchases/"),e.next=3,j()({method:"GET",url:n,headers:{Authorization:"Bearer "+t.token}}).then((function(e){return e.data})).then((function(e){return E(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){O(!1),S(!0),z(!1),y([]),function(){Y.apply(this,arguments)}()}function ne(){O(!0),S(!1),z(!1),s([]),W()}function ce(){O(!1),S(!1),z(!0),E([]),function(){ee.apply(this,arguments)}()}return Object(c.useEffect)((function(){W()}),[]),Object(c.useEffect)((function(){_&&(M(!1),p?ne():k&&te())}),[_]),Object(c.useEffect)((function(){H&&(K(!1),p?ne():k&&te())}),[H]),Object(b.jsxs)("div",{className:"App2",children:[I&&Object(b.jsx)(h,{user:t,setShowAddProduct:L,setProductAdded:M}),Object.keys(V).length>0&&Object(b.jsx)(f,{user:t,product:V,setActualProduct:J,setProductBuy:K}),Object(b.jsx)("div",{className:"user-info",children:Object(b.jsx)("p",{children:"".concat(t.nickName," - ").concat(t.email)})}),Object(b.jsxs)("div",{className:"buttons-container",children:[Object(b.jsx)("button",{type:"button",onClick:function(){return ne()},children:"Ver productos"}),Object(b.jsx)("button",{type:"button",onClick:function(){return te()},children:"Ver mis productos"}),Object(b.jsx)("button",{type:"button",onClick:function(){return L(!0)},children:"Agregar producto"}),Object(b.jsx)("button",{type:"button",onClick:function(){return ce()},children:"Ver mis compras"})]}),p&&Object(b.jsxs)("div",{className:"products-container",children:[Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{className:"bold",children:"Nombre"}),Object(b.jsx)("p",{className:"bold",children:"Precio"}),Object(b.jsx)("p",{className:"bold",children:"Cantidad disponible"}),Object(b.jsx)("button",{type:"button",children:"Opciones"})]}),a.map((function(e){return Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{children:e.name}),Object(b.jsx)("p",{children:e.price}),Object(b.jsx)("p",{children:e.quantity}),Object(b.jsx)("button",{type:"button",onClick:function(){return J(e)},children:"Comprar"})]})}))]}),k&&Object(b.jsxs)("div",{className:"products-container",children:[Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{className:"bold",children:"Nombre"}),Object(b.jsx)("p",{className:"bold",children:"Precio"}),Object(b.jsx)("p",{className:"bold",children:"Cantidad inicial"}),Object(b.jsx)("p",{className:"bold",children:"Cantidad disponible"})]}),N.map((function(e){return Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{children:e.name}),Object(b.jsx)("p",{children:e.price}),Object(b.jsx)("p",{children:e.firstQuantity}),Object(b.jsx)("p",{children:e.quantity})]})}))]}),T&&Object(b.jsxs)("div",{className:"products-container",children:[Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{className:"bold",children:"C\xf3digo"}),Object(b.jsx)("p",{className:"bold",children:"Nombre"}),Object(b.jsx)("p",{className:"bold",children:"Precio"}),Object(b.jsx)("p",{className:"bold",children:"Cantidad"})]}),A.map((function(e){return Object(b.jsxs)("div",{className:"product-container",children:[Object(b.jsx)("p",{children:e.verificationCode}),Object(b.jsx)("p",{children:e.product.name}),Object(b.jsx)("p",{children:e.product.price}),Object(b.jsx)("p",{children:e.product.quantity})]})}))]})]})},v="http://localhost:8000/",N=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/;var y=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),o=s[0],d=s[1],p=Object(c.useState)(""),h=Object(l.a)(p,2),O=h[0],f=h[1],m=Object(c.useState)(""),y=Object(l.a)(m,2),g=y[0],C=y[1],k=Object(c.useState)(!1),S=Object(l.a)(k,2),w=S[0],P=S[1],A=Object(c.useState)(!1),E=Object(l.a)(A,2),q=E[0],B=E[1],T=Object(c.useState)(!1),z=Object(l.a)(T,2),D=z[0],F=z[1],I=Object(c.useState)(""),L=Object(l.a)(I,2),R=L[0],G=L[1],V=Object(c.useState)({token:""}),J=Object(l.a)(V,2),U=J[0],Z=J[1];function _(){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(u.a.mark((function e(){var t,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!1),!n){e.next=12;break}if(O&&g){e.next=5;break}return P(!0),e.abrupt("return");case 5:return t="".concat(v,"users/api/log-in/"),c={},c=N.test(O)?{email:O,password:g}:{nick_name:O,password:g},e.next=10,j()({method:"POST",url:t,data:c}).then((function(e){return e.data})).then((function(e){return Z(e)})).catch((function(e){var t;404===(null===(t=e.response)||void 0===t?void 0:t.status)&&B(!0)}));case 10:e.next=19;break;case 12:if(o&&g&&O){e.next=15;break}return P(!0),e.abrupt("return");case 15:return r="".concat(v,"users/api/sign-up/"),a={email:O,password:g,nick_name:o},e.next=19,j()({method:"POST",url:r,data:a}).then((function(e){return e.data})).then((function(e){return Z(e)})).catch((function(e){var t;console.log(e.response.data),400===(null===(t=e.response)||void 0===t?void 0:t.status)&&(F(!0),G(e.response.data.message.includes("Nickname")?"Username ocupado, debe escoger otro":"Email ocupado, debe escoger otro"))}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){P(!1),B(!1),F(!1),G(""),d(""),f(""),C("")}),[n]),U.token.length>0?Object(b.jsx)(x,{user:U}):Object(b.jsx)("div",{className:"App",children:n?Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("p",{className:"title",children:"Log In"}),Object(b.jsx)("input",{type:"text",value:O,onChange:function(e){return f(e.target.value)},placeholder:"email o username"}),Object(b.jsx)("input",{type:"password",value:g,onChange:function(e){return C(e.target.value)},placeholder:"contrase\xf1a"}),Object(b.jsx)("button",{type:"button",className:"confirm-button",onClick:function(){return _()},children:"Confirmar"}),Object(b.jsx)("button",{type:"button",className:"none-account",onClick:function(){return r(!1)},children:"Crear cuenta"}),w&&Object(b.jsx)("p",{className:"invalid",children:"Request incorrecto. Debe llenar todos los campos."}),q&&Object(b.jsx)("p",{className:"invalid",children:"Request incorrecto. El email o nickname no coincide con la contrase\xf1a."})]}):Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("p",{className:"title",children:"Sign Up"}),Object(b.jsx)("input",{type:"text",value:o,onChange:function(e){return d(e.target.value)},placeholder:"username"}),Object(b.jsx)("input",{type:"text",value:O,onChange:function(e){return f(e.target.value)},placeholder:"email"}),Object(b.jsx)("input",{type:"password",value:g,onChange:function(e){return C(e.target.value)},placeholder:"contrase\xf1a"}),Object(b.jsx)("button",{type:"button",className:"confirm-button",onClick:function(){return _()},children:"Confirmar"}),Object(b.jsx)("button",{type:"button",className:"none-account",onClick:function(){return r(!0)},children:"Log in"}),w&&Object(b.jsx)("p",{className:"invalid",children:"Request incorrecto. Debe llenar todos los campos."}),D&&Object(b.jsxs)("p",{className:"invalid",children:["Request incorrecto. ",R]})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(y,{})}),document.getElementById("root")),g()}},[[46,1,2]]]);
//# sourceMappingURL=main.0683faa3.chunk.js.map