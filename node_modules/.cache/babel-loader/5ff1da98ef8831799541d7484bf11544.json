{"ast":null,"code":"var _jsxFileName = \"/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/src/BuyProduct.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport './BuyProduct.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8000/';\n\nfunction BuyProduct(props) {\n  _s();\n\n  const {\n    user,\n    product,\n    setActualProduct,\n    setProductBuy\n  } = props;\n  const [quantity, setQuantity] = useState(0);\n  const [invalid, setInvalid] = useState(false);\n\n  async function handleSubmit() {\n    if (quantity <= 0) {\n      setInvalid(true);\n    }\n\n    const url = `${API_URL}users/api/new-purchase/`;\n    const data = {\n      \"product\": {\n        id: product.id,\n        quantity: parseInt(quantity)\n      }\n    };\n    await axios({\n      method: 'POST',\n      url,\n      headers: {\n        Authorization: 'Bearer ' + user.token\n      },\n      data\n    }).then(res => res.data).then(() => {\n      setProductBuy(true);\n      setActualProduct({});\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-view\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"product\",\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: quantity,\n        onChange: e => setQuantity(e.target.value),\n        placeholder: \"Cantidad del producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleSubmit(),\n        children: \"Comprar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"red\",\n        onClick: () => setActualProduct({}),\n        children: \"Cerrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), invalid && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Debes completar todos los campos correctamente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BuyProduct, \"eyjkbd7BiluN6fSFG304gBHaVdw=\");\n\n_c = BuyProduct;\nexport default BuyProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"BuyProduct\");","map":{"version":3,"sources":["/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/src/BuyProduct.js"],"names":["useState","axios","API_URL","BuyProduct","props","user","product","setActualProduct","setProductBuy","quantity","setQuantity","invalid","setInvalid","handleSubmit","url","data","id","parseInt","method","headers","Authorization","token","then","res","name","e","target","value"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,kBAAP;;AAEA,MAAMC,OAAO,GAAG,wBAAhB;;AAEA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AAAA;;AACzB,QAAM;AACJC,IAAAA,IADI;AAEJC,IAAAA,OAFI;AAGJC,IAAAA,gBAHI;AAIJC,IAAAA;AAJI,MAKFJ,KALJ;AAMA,QAAM,CAACK,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;;AAEA,iBAAea,YAAf,GAA8B;AAC5B,QAAIJ,QAAQ,IAAI,CAAhB,EAAmB;AACjBG,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AACD,UAAME,GAAG,GAAI,GAAEZ,OAAQ,yBAAvB;AACA,UAAMa,IAAI,GAAG;AACX,iBAAW;AACTC,QAAAA,EAAE,EAAEV,OAAO,CAACU,EADH;AAETP,QAAAA,QAAQ,EAAEQ,QAAQ,CAACR,QAAD;AAFT;AADA,KAAb;AAMA,UAAMR,KAAK,CAAC;AACViB,MAAAA,MAAM,EAAE,MADE;AAEVJ,MAAAA,GAFU;AAGVK,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYf,IAAI,CAACgB;AADzB,OAHC;AAMVN,MAAAA;AANU,KAAD,CAAL,CAQHO,IARG,CAQGC,GAAD,IAASA,GAAG,CAACR,IARf,EASHO,IATG,CASE,MAAM;AACVd,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAD,MAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,KAZG,CAAN;AAaD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA,kBACGD,OAAO,CAACkB;AADX;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,KAAK,EAAEf,QAFT;AAGE,QAAA,QAAQ,EAAGgB,CAAD,IAAOf,WAAW,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAH9B;AAIE,QAAA,WAAW,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA,cAJF,eAUE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,OAAO,EAAE,MAAMd,YAAY,EAF7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF,eAgBE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,KAFZ;AAGE,QAAA,OAAO,EAAE,MAAMN,gBAAgB,CAAC,EAAD,CAHjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBF,EAuBII,OAAD,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAiCD;;GArEQR,U;;KAAAA,U;AAuET,eAAeA,UAAf","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport './BuyProduct.css';\n\nconst API_URL = 'http://localhost:8000/';\n\nfunction BuyProduct(props) {\n  const {\n    user,\n    product,\n    setActualProduct,\n    setProductBuy,\n  } = props;\n  const [quantity, setQuantity] = useState(0);\n  const [invalid, setInvalid] = useState(false);\n\n  async function handleSubmit() {\n    if (quantity <= 0) {\n      setInvalid(true);\n    }\n    const url = `${API_URL}users/api/new-purchase/`;\n    const data = {\n      \"product\": {\n        id: product.id,\n        quantity: parseInt(quantity),\n      }\n    }\n    await axios({\n      method: 'POST',\n      url,\n      headers: {\n        Authorization: 'Bearer ' + user.token,\n      },\n      data,\n    })\n      .then((res) => res.data)\n      .then(() => {\n        setProductBuy(true);\n        setActualProduct({});\n      });\n  }\n\n  return (\n    <div className=\"modal-view\">\n      <div className=\"modal-content\">\n        <p className=\"product\">\n          {product.name}\n        </p>\n        <input\n          type=\"number\"\n          value={quantity}\n          onChange={(e) => setQuantity(e.target.value)}\n          placeholder=\"Cantidad del producto\"\n        />\n        <button\n          type=\"button\"\n          onClick={() => handleSubmit()}\n        >\n          Comprar\n        </button>\n        <button\n          type=\"button\"\n          className=\"red\"\n          onClick={() => setActualProduct({})}\n        >\n          Cerrar\n        </button>\n        {(invalid) && (\n          <p>\n            Debes completar todos los campos correctamente\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default BuyProduct;\n"]},"metadata":{},"sourceType":"module"}