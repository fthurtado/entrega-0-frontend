{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import axios from'axios';import'./BuyProduct.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='http://localhost:8000/';function BuyProduct(props){var user=props.user,product=props.product,setActualProduct=props.setActualProduct,setProductBuy=props.setProductBuy;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),invalid=_useState4[0],setInvalid=_useState4[1];function handleSubmit(){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(quantity<=0){setInvalid(true);}url=\"\".concat(API_URL,\"users/api/new-purchase/\");data={\"product\":{id:product.id,quantity:parseInt(quantity)}};_context.next=5;return axios({method:'POST',url:url,headers:{Authorization:'Bearer '+user.token},data:data}).then(function(res){return res.data;}).then(function(){setProductBuy(true);setActualProduct({});});case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"product\",children:product.name}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quantity,onChange:function onChange(e){return setQuantity(e.target.value);},placeholder:\"Cantidad del producto\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleSubmit();},children:\"Comprar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"red\",onClick:function onClick(){return setActualProduct({});},children:\"Cerrar\"}),invalid&&/*#__PURE__*/_jsx(\"p\",{children:\"Debes completar todos los campos correctamente\"})]})});}export default BuyProduct;","map":{"version":3,"sources":["/Users/fh17/Desktop/IIC2173 - Arquitecura de Sistemas de Software/Entrega 0/frontend/src/BuyProduct.js"],"names":["useState","axios","API_URL","BuyProduct","props","user","product","setActualProduct","setProductBuy","quantity","setQuantity","invalid","setInvalid","handleSubmit","url","data","id","parseInt","method","headers","Authorization","token","then","res","name","e","target","value"],"mappings":"8lBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,wBAAhB,CAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,IAEvBC,CAAAA,IAFuB,CAMrBD,KANqB,CAEvBC,IAFuB,CAGvBC,OAHuB,CAMrBF,KANqB,CAGvBE,OAHuB,CAIvBC,gBAJuB,CAMrBH,KANqB,CAIvBG,gBAJuB,CAKvBC,aALuB,CAMrBJ,KANqB,CAKvBI,aALuB,eAOOR,QAAQ,CAAC,CAAD,CAPf,wCAOlBS,QAPkB,eAORC,WAPQ,8BAQKV,QAAQ,CAAC,KAAD,CARb,yCAQlBW,OARkB,eAQTC,UARS,uBAUVC,CAAAA,YAVU,8IAUzB,gJACE,GAAIJ,QAAQ,EAAI,CAAhB,CAAmB,CACjBG,UAAU,CAAC,IAAD,CAAV,CACD,CACKE,GAJR,WAIiBZ,OAJjB,4BAKQa,IALR,CAKe,CACX,UAAW,CACTC,EAAE,CAAEV,OAAO,CAACU,EADH,CAETP,QAAQ,CAAEQ,QAAQ,CAACR,QAAD,CAFT,CADA,CALf,uBAWQR,CAAAA,KAAK,CAAC,CACViB,MAAM,CAAE,MADE,CAEVJ,GAAG,CAAHA,GAFU,CAGVK,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYf,IAAI,CAACgB,KADzB,CAHC,CAMVN,IAAI,CAAJA,IANU,CAAD,CAAL,CAQHO,IARG,CAQE,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACR,IAAb,EARF,EASHO,IATG,CASE,UAAM,CACVd,aAAa,CAAC,IAAD,CAAb,CACAD,gBAAgB,CAAC,EAAD,CAAhB,CACD,CAZG,CAXR,uDAVyB,+CAoCzB,mBACE,YAAK,SAAS,CAAC,YAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,UAAG,SAAS,CAAC,SAAb,UACGD,OAAO,CAACkB,IADX,EADF,cAIE,cACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAEf,QAFT,CAGE,QAAQ,CAAE,kBAACgB,CAAD,QAAOf,CAAAA,WAAW,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHZ,CAIE,WAAW,CAAC,uBAJd,EAJF,cAUE,eACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBAAMd,CAAAA,YAAY,EAAlB,EAFX,qBAVF,cAgBE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,KAFZ,CAGE,OAAO,CAAE,yBAAMN,CAAAA,gBAAgB,CAAC,EAAD,CAAtB,EAHX,oBAhBF,CAuBII,OAAD,eACC,qEAxBJ,GADF,EADF,CAiCD,CAED,cAAeR,CAAAA,UAAf","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport './BuyProduct.css';\n\nconst API_URL = 'http://localhost:8000/';\n\nfunction BuyProduct(props) {\n  const {\n    user,\n    product,\n    setActualProduct,\n    setProductBuy,\n  } = props;\n  const [quantity, setQuantity] = useState(0);\n  const [invalid, setInvalid] = useState(false);\n\n  async function handleSubmit() {\n    if (quantity <= 0) {\n      setInvalid(true);\n    }\n    const url = `${API_URL}users/api/new-purchase/`;\n    const data = {\n      \"product\": {\n        id: product.id,\n        quantity: parseInt(quantity),\n      }\n    }\n    await axios({\n      method: 'POST',\n      url,\n      headers: {\n        Authorization: 'Bearer ' + user.token,\n      },\n      data,\n    })\n      .then((res) => res.data)\n      .then(() => {\n        setProductBuy(true);\n        setActualProduct({});\n      });\n  }\n\n  return (\n    <div className=\"modal-view\">\n      <div className=\"modal-content\">\n        <p className=\"product\">\n          {product.name}\n        </p>\n        <input\n          type=\"number\"\n          value={quantity}\n          onChange={(e) => setQuantity(e.target.value)}\n          placeholder=\"Cantidad del producto\"\n        />\n        <button\n          type=\"button\"\n          onClick={() => handleSubmit()}\n        >\n          Comprar\n        </button>\n        <button\n          type=\"button\"\n          className=\"red\"\n          onClick={() => setActualProduct({})}\n        >\n          Cerrar\n        </button>\n        {(invalid) && (\n          <p>\n            Debes completar todos los campos correctamente\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default BuyProduct;\n"]},"metadata":{},"sourceType":"module"}